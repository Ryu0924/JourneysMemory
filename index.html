<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>旅行記アプリ</title>
    <!-- 正しいCSSファイルのリンク -->
    <link rel="stylesheet" type="text/css" href="index.css">
    <!-- LINEログインSDKのスクリプトを追加 -->
    <script src="https://static.line-scdn.net/liff/edge/2.14/sdk.js"></script>
</head>
<body>

<!-- LINEログインボタン -->
<!--<button onclick="loginWithLine()">LINEでログイン</button> -->

<!-- 旅行記エントリーの表示エリア -->
<div id="travelEntries"></div>

<!-- 旅行記録の入力フォーム -->
<div>
    <h2>旅行記録を追加</h2>
    <form id="travelForm">
        <label for="title">タイトル:</label>
        <input type="text" id="title" name="title" required><br>
        <br>
        <label for="text">テキスト:</label>
        <textarea id="text" name="text" required></textarea>

        <button onclick="saveEntry()">保存</button>
        <button onclick="loadEntries()">投稿</button>
    </form>
</div>

<script>
  function saveEntry() {
    const title = document.getElementById('title').value;
    const text = document.getElementById('text').value;

    const newEntry = { title, content: text };

    fetch('/save-entry', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(newEntry),
    })
      .then(response => response.text())
      .then(message => {
        console.log(message);
        alert('旅行記が保存されました！');
      })
      .catch(error => {
        console.error('Error:', error);
        alert('保存中にエラーが発生しました。');
      });
  }

  function loadEntries() {
    fetch('/get-entries')
      .then(response => response.json())
      .then(entries => {
        const entriesContainer = document.getElementById('travelEntries');
        entriesContainer.innerHTML = '';

        entries.forEach(entry => {
          const entryElement = document.createElement('div');
          entryElement.innerHTML = `
            <h3>${entry.title}</h3>
            <p>${entry.content}</p>
            <hr>
          `;
          entriesContainer.appendChild(entryElement);
        });
      })
      .catch(error => {
        console.error('Error:', error);
        alert('読み込み中にエラーが発生しました。');
      });
  }
</script>

</body>
</html>
